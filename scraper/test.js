const subSubGroups = {
    "01.06.1 Bodenarten": {
        "Grobbodenart und -anteil am Gesamtboden": {
            1990: {
                year: "1990",
                name: "1990 - Grobbodenart und -anteil am Gesamtboden",
                id: "k01_06_01bodart1990:3",
            },
            2001: {
                year: "2001",
                name: "2001 - Grobbodenart und -anteil am Gesamtboden",
                id: "kb01_06_01bodart:4",
            },
            2005: {
                year: "2005",
                name: "2005 - Grobbodenart und -anteil am Gesamtboden",
                id: "k01_06_01bodart2005:2",
            },
            2010: {
                year: "2010",
                name: "2010 - Grobbodenart und -anteil am Gesamtboden",
                id: "k01_06_01bodart2010:2",
            },
            2015: {
                year: "2015",
                name: "2015 - Grobbodenart und -anteil am Gesamtboden",
                id: "wmsk01_06_01bodart2015:2",
            },
        },
        Torfart: {
            1990: {
                year: "1990",
                name: "1990 - Torfart",
                id: "k01_06_01bodart1990:4",
            },
            2001: {
                year: "2001",
                name: "2001 - Torfart",
                id: "kb01_06_01bodart:5",
            },
            2005: {
                year: "2005",
                name: "2005 - Torfart",
                id: "k01_06_01bodart2005:3",
            },
            2010: {
                year: "2010",
                name: "2010 - Torfart",
                id: "k01_06_01bodart2010:3",
            },
            2015: {
                year: "2015",
                name: "2015 - Torfart",
                id: "wmsk01_06_01bodart2015:3",
            },
        },
        Bodenarten: {
            1990: {
                year: "1990",
                name: "1990 - Bodenarten",
                id: "k01_06_01bodart1990:1",
            },
            2001: {
                year: "2001",
                name: "2001 - Bodenarten",
                id: "kb01_06_01bodart:1",
            },
            2005: {
                year: "2005",
                name: "2005 - Bodenarten",
                id: "k01_06_01bodart2005:1",
            },
            2010: {
                year: "2010",
                name: "2010 - Bodenarten",
                id: "k01_06_01bodart2010:1",
            },
            2015: {
                year: "2015",
                name: "2015 - Bodenarten",
                id: "wmsk01_06_01bodart2015:1",
            },
        },
    },
    "01.06.2 Nutzbare Feldkapazität für Flachwurzler": {
        "Nutzbare Feldkapazität für Flachwurzler": {
            2001: {
                year: "2001",
                name: "2001 - Nutzbare Feldkapazität für Flachwurzler",
                id: "kb01_06_02flach:1",
            },
            2005: {
                year: "2005",
                name: "2005 - Nutzbare Feldkapazität für Flachwurzler",
                id: "k01_06_02flach2005:1",
            },
            2010: {
                year: "2010",
                name: "2010 - Nutzbare Feldkapazität für Flachwurzler",
                id: "k01_06_02flach2010:1",
            },
            2015: {
                year: "2015",
                name: "2015 - Nutzbare Feldkapazität für Flachwurzler",
                id: "k01_06_02flach2015:1",
            },
        },
    },
    "01.06.4 Nutzbare Feldkapazität des effektiven Wurzelraumes": {
        "Nutzbare Feldkapazität des effektiven Wurzelraumes": {
            1990: {
                year: "1990",
                name: "1990 - Nutzbare Feldkapazität des effektiven Wurzelraumes",
                id: "k01_06_04nfeld1990:1",
            },
            2001: {
                year: "2001",
                name: "2001 - Nutzbare Feldkapazität des effektiven Wurzelraumes",
                id: "kb01_06_04nfeld:1",
            },
            2005: {
                year: "2005",
                name: "2005 - Nutzbare Feldkapazität des effektiven Wurzelraumes",
                id: "k01_06_04nfeld2005:1",
            },
            2010: {
                year: "2010",
                name: "2010 - Nutzbare Feldkapazität des effektiven Wurzelraumes",
                id: "k01_06_04nfeld2010:1",
            },
            2015: {
                year: "2015",
                name: "2015 - Nutzbare Feldkapazität des effektiven Wurzelraumes",
                id: "k01_06_04nfeld2015:1",
            },
        },
    },
    "01.06.5 Humusmenge": {
        Humusmenge: {
            1990: {
                year: "1990",
                name: "1990 - Humusmenge",
                id: "k01_06_05humus1990:1",
            },
            2001: {
                year: "2001",
                name: "2001 - Humusmenge",
                id: "kb01_06_05humus:1",
            },
            2005: {
                year: "2005",
                name: "2005 - Humusmenge",
                id: "k01_06_05humus2005:1",
            },
            2010: {
                year: "2010",
                name: "2010 - Humusmenge",
                id: "k01_06_05humus2010:1",
            },
            2015: {
                year: "2015",
                name: "2015 - Humusmenge",
                id: "k01_06_05humus2015:1",
            },
        },
    },
    "01.06.6 Organischer Kohlenstoffvorrat": {
        "Kohlenstoffvorräte [kg/m²]": {
            2010: {
                year: "2010",
                name: "2010 - Kohlenstoffvorräte [kg/m²]",
                id: "wmsk_01_06_6kohlenstoffvor2010:4",
            },
            2015: {
                year: "2015",
                name: "2015 - Kohlenstoffvorräte [kg/m²]",
                id: "k_01_06_6kohlenstoffvor2015:1",
            },
        },
        "pH-Werte als Mittel aus Ober- und Unterboden": {
            1990: {
                year: "1990",
                name: "1990 - pH-Werte als Mittel aus Ober- und Unterboden",
                id: "k01_06_07ph1990:1",
            },
        },
    },
    "01.06.7 pH-Werte im Oberboden": {
        "pH-Werte im Oberboden": {
            2001: {
                year: "2001",
                name: "2001 - pH-Werte im Oberboden",
                id: "kb01_06_07ph:1",
            },
            2005: {
                year: "2005",
                name: "2005 - pH-Werte im Oberboden",
                id: "k01_06_07ph2005:2",
            },
            2015: {
                year: "2015",
                name: "2015 - pH-Werte im Oberboden",
                id: "k01_06_07ph2015:1",
            },
        },
    },
    "01.06.8 Summe austauschbarer basischer Kationen des Oberbodens (S-Wert)": {
        "Summe austauschbarer Kationen des Oberbodens": {
            1990: {
                year: "1990",
                name: "1990 - Summe austauschbarer Kationen des Oberbodens",
                id: "k01_06_08sumkat1990:1",
            },
            2001: {
                year: "2001",
                name: "2001 - Summe austauschbarer Kationen des Oberbodens",
                id: "kb01_06_08sumkat:1",
            },
            2005: {
                year: "2005",
                name: "2005 - Summe austauschbarer Kationen des Oberbodens",
                id: "k01_06_08sumkat2005:1",
            },
            2010: {
                year: "2010",
                name: "2010 - Summe austauschbarer Kationen des Oberbodens",
                id: "k01_06_08sumkat2010:1",
            },
            2015: {
                year: "2015",
                name: "2015 - Summe austauschbarer Kationen des Oberbodens",
                id: "k01_06_08sumkat2015:1",
            },
        },
    },
    "01.06.9 Mittlere effektive Kationenaustauschkapazität (KAKeff)": {
        "Mittlere effektive Kationenaustauschkapazität": {
            1990: {
                year: "1990",
                name: "1990 - Mittlere effektive Kationenaustauschkapazität",
                id: "k01_06_09kataus1990:1",
            },
            2001: {
                year: "2001",
                name: "2001 - Mittlere effektive Kationenaustauschkapazität",
                id: "kb01_06_09kataus:1",
            },
            2005: {
                year: "2005",
                name: "2005 - Mittlere effektive Kationenaustauschkapazität",
                id: "k01_06_09kataus2005:1",
            },
            2010: {
                year: "2010",
                name: "2010 - Mittlere effektive Kationenaustauschkapazität",
                id: "k01_06_09kataus2010:1",
            },
            2015: {
                year: "2015",
                name: "2015 - Mittlere effektive Kationenaustauschkapazität",
                id: "k01_06_09kataus2015:1",
            },
        },
    },
    "01.06.10 Gesättigte Wasserdurchlässigkeit (kf)": {
        "Wasserdurchlässigkeit (kf) der Böden": {
            1990: {
                year: "1990",
                name: "1990 - Wasserdurchlässigkeit (kf) der Böden",
                id: "k01_06_10wasdur1990:1",
            },
            2001: {
                year: "2001",
                name: "2001 - Wasserdurchlässigkeit (kf) der Böden",
                id: "kb01_06_10wasdur:1",
            },
            2005: {
                year: "2005",
                name: "2005 - Wasserdurchlässigkeit (kf) der Böden",
                id: "k01_06_10wasdur2005:1",
            },
            2010: {
                year: "2010",
                name: "2010 - Wasserdurchlässigkeit (kf) der Böden",
                id: "k01_06_10wasdur2010:1",
            },
            2015: {
                year: "2015",
                name: "2015 - Wasserdurchlässigkeit (kf) der Böden",
                id: "k01_06_10wasdur2015:1",
            },
        },
    },
};

const newData = {};
// remove groups names that have only one entry
Object.keys(subSubGroups).forEach((d) => {
    if (Object.keys(subSubGroups[d]).length === 1) {
        newData[d] = Object.values(subSubGroups[d])[0];
    } else {
        newData[d] = subSubGroups[d];
    }
});

const newDataFolderStructure = [];
function toFolderStructure(inputData, structuredData) {
    Object.keys(inputData).forEach((key) => {
        const keys = Object.keys(inputData[key]);
        const hasLayers = inputData[key][keys[0]]?.year;
        if (hasLayers) {
            structuredData.push({
                Titel: key,
                isFolderSelectable: false,
                Layer: keys.map((layerKey) => ({
                    id: inputData[key][layerKey].id,
                    name: inputData[key][layerKey].name,
                })),
            });
        } else {
            const subssss = [];
            structuredData.push({
                Titel: key,
                isFolderSelectable: false,
                Ordner: subssss,
            });

            toYearFolderStructure(inputData[key], subssss);
        }
    });
}
toFolderStructure(newData, newDataFolderStructure);

function toYearFolderStructure(inputData, structuredData) {
    const byYear = {};
    Object.keys(inputData).forEach((key) => {
        Object.keys(inputData[key]).forEach((keyKey) => {
            if (!byYear[keyKey]) {
                byYear[keyKey] = [];
            }
            byYear[keyKey].push(inputData[key][keyKey]);
        });
    });

    Object.keys(byYear).forEach((year) => {
        structuredData.push({
            Titel: year,
            isFolderSelectable: true,
            Layer: byYear[year].map((y) => ({
                id: y.id,
                name: y.name,
            })),
        });
    });
}

